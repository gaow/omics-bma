GSL_VERSION = "1.16"
SM_VERSION = "3.5.4"
MOSEK_VERSION = "7.1.0.44"

rule all:
  input: "eqtlbma", "gsl", "snakemake", "deepdish", "mosek"

rule eqtlbma:
  params: url = "https://github.com/gaow/eqtlbma.git"
  output: "eqtlbma"
  shell: "git clone -b omics-bma {params.url}"

rule gsl:
  params: url = "ftp://ftp.gnu.org/gnu/gsl/gsl-{0}.tar.gz".format(GSL_VERSION)
  output: "gsl"
  shell:
    '''
    rm -rf gsl*
    wget {params.url}
    tar -zxvf gsl-{GSL_VERSION}.tar.gz
    ln -s gsl-{GSL_VERSION} {output}
    '''

rule snakemake:
  params: url = "https://pypi.python.org/packages/source/s/snakemake/snakemake-{0}.tar.gz".format(SM_VERSION)
  output: "snakemake"
  shell:
    '''
    rm -rf snakemake-{SM_VERSION}.zip {output}
    wget {params.url}
    tar zxvf snakemake-{SM_VERSION}.tar.gz
    mv snakemake-{SM_VERSION} {output}
    '''

rule mosek:
  params: url = "http://download.mosek.com/stable/{}/mosektoolslinux64x86.tar.bz2".format(MOSEK_VERSION)
  output: "mosek"
  shell:
    '''
    rm -f mosektoolslinux64x86.tar.bz2
    wget {params.url}
    tar jxvf mosektoolslinux64x86.tar.bz2
    '''

rule deepdish:
  params: url = "https://github.com/gaow/deepdish.git"
  output: "deepdish"
  shell: "git clone {params.url}"
